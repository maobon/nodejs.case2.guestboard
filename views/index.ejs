<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>NodeJS 留言板</title>
    <style>
        .comment-list {
            overflow-x: auto;
            height: 400px;
            border: 1px solid #ccc;
            border-radius: 10px;
        }
    </style>
</head>

<body>
<h1>留言板</h1>
<div class="container">
    <ul class="comment-list">
    </ul>
    <div>
        <!-- form 表单 -->
        <form id="form" method="post" action="/comments">
            <!-- textarea name="message" -->
            <textarea name="message" id="message" cols="150" rows="3" required maxlength="150"></textarea>
            <!-- submit button -->
            <input type="submit" value="发送">
        </form>
    </div>
</div>

<!-- 资源引用写为绝对路径 -->
<script src="/node_modules/jquery/dist/jquery.min.js"></script>
<script src="/node_modules/art-template/dist/template.js"></script>
<!-- template -->
<script type="text/template" id="tpl">
    <li><span class="ip">192.168.1.1</span>说：<span class="message">哈哈</span></li>
</script>

<script>
    $(function () {

        $(window).on('keyup', function (e) {
            if (e.keyCode === 13) {
                console.log('Enter button is clicked...');
            }
        })

        $("#form").on('submit', function (e) {
            e.preventDefault();

            $.ajax({
                type: 'post',
                url: '/submit',
                data: $("#form").serialize(),
                dataType: 'json'

            }).then(function (data) {

            }).catch(function (err) {

            })

        });
    });
</script>

</body>
</html>

